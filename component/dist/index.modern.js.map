{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { LinkedMarkdown } from '@linkedmd/parser'\nimport './styles.css'\n\ninterface Props {\n  fileUrl: string\n}\n\nconst fetchAndParse = async (fileUrl: string) => {\n  const data = await fetch(fileUrl)\n  const file = await data.text()\n  const parser = new LinkedMarkdown(file)\n  await parser.parse()\n  return { file, parser }\n}\n\nexport const LinkedMarkdownViewer = ({ fileUrl }: Props) => {\n  const [fileStack, setFileStack] = useState<string[]>([])\n  const [output, setOutput] = useState('')\n  \n  useEffect(() => {\n    fetchAndParse(fileUrl)\n      .then(({ parser }: { parser: any }) => {\n        setFileStack(fileStack.concat([fileUrl]))\n        setOutput(parser.toHTML() || '')\n      })\n  }, [])\n\n  return <div className=\"LM-output\" dangerouslySetInnerHTML={{ __html: output }} />\n}\n\nexport const LinkedMarkdownEditor = ({ fileUrl }: Props) => {\n  const [input, setInput] = useState<string>('')\n  const [output, setOutput] = useState('')\n\n  useEffect(() => {\n    fetchAndParse(fileUrl)\n      .then(({ file, parser }: { file: string, parser: any }) => {\n        setInput(file || '')\n        setOutput(parser.toHTML() || '')\n        !!file && localStorage.setItem('saved-input', file)\n      })\n    \n  }, [])\n\n  useEffect(() => {\n    const parser = new LinkedMarkdown(input)\n    parser.parse().then(() => {\n      setOutput(parser.toHTML())\n    })\n    input !== '' && localStorage.setItem('saved-input', input)\n  }, [input])\n\n  useEffect(() => {\n    const savedInput = localStorage.getItem('saved-input')\n    !!savedInput && setInput(savedInput || '')\n  }, [])\n\n  const handleInput = (e: React.SyntheticEvent) => {\n    const target = e.target as typeof e.target & {\n      value: string\n    }\n  \n    setInput(target.value)\n  }\n\n  return (\n    <div className=\"LM-split-screen\">\n      <textarea className=\"LM-input\" onChange={handleInput} value={input} />\n      <div className=\"LM-output\" dangerouslySetInnerHTML={{ __html: output }} />\n    </div>\n  )\n}\n"],"names":["fetchAndParse","fileUrl","fetch","data","text","file","parser","LinkedMarkdown","parse","LinkedMarkdownViewer","useState","fileStack","setFileStack","output","setOutput","useEffect","then","concat","toHTML","React","className","dangerouslySetInnerHTML","__html","LinkedMarkdownEditor","input","setInput","localStorage","setItem","savedInput","getItem","handleInput","e","target","value","onChange"],"mappings":";;;AAQA,IAAMA,aAAa,YAAbA,aAAa,CAAUC,OAAV;EAAA;2BACEC,KAAK,CAACD,OAAD,kBAAlBE;6BACaA,IAAI,CAACC,IAAL,mBAAbC;QACN,IAAMC,MAAM,GAAG,IAAIC,cAAJ,CAAmBF,IAAnB,CAAf;+BACMC,MAAM,CAACE,KAAP;UACN,OAAO;YAAEH,IAAI,EAAJA,IAAF;YAAQC,MAAM,EAANA;WAAf;;;;GALiB;IAAA;;AAAA,CAAnB;;IAQaG,oBAAoB,GAAG,SAAvBA,oBAAuB;MAAGR,eAAAA;;EACrC,gBAAkCS,QAAQ,CAAW,EAAX,CAA1C;MAAOC,SAAP;MAAkBC,YAAlB;;EACA,iBAA4BF,QAAQ,CAAC,EAAD,CAApC;MAAOG,MAAP;MAAeC,SAAf;;EAEAC,SAAS,CAAC;IACRf,aAAa,CAACC,OAAD,CAAb,CACGe,IADH,CACQ;UAAGV,eAAAA;MACPM,YAAY,CAACD,SAAS,CAACM,MAAV,CAAiB,CAAChB,OAAD,CAAjB,CAAD,CAAZ;MACAa,SAAS,CAACR,MAAM,CAACY,MAAP,MAAmB,EAApB,CAAT;KAHJ;GADO,EAMN,EANM,CAAT;EAQA,OAAOC,mBAAA,MAAA;IAAKC,SAAS,EAAC;IAAYC,uBAAuB,EAAE;MAAEC,MAAM,EAAET;;GAA9D,CAAP;AACD;IAEYU,oBAAoB,GAAG,SAAvBA,oBAAuB;MAAGtB,gBAAAA;;EACrC,iBAA0BS,QAAQ,CAAS,EAAT,CAAlC;MAAOc,KAAP;MAAcC,QAAd;;EACA,iBAA4Bf,QAAQ,CAAC,EAAD,CAApC;MAAOG,MAAP;MAAeC,SAAf;;EAEAC,SAAS,CAAC;IACRf,aAAa,CAACC,OAAD,CAAb,CACGe,IADH,CACQ;UAAGX,aAAAA;UAAMC,eAAAA;MACbmB,QAAQ,CAACpB,IAAI,IAAI,EAAT,CAAR;MACAS,SAAS,CAACR,MAAM,CAACY,MAAP,MAAmB,EAApB,CAAT;MACA,CAAC,CAACb,IAAF,IAAUqB,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCtB,IAApC,CAAV;KAJJ;GADO,EAQN,EARM,CAAT;EAUAU,SAAS,CAAC;IACR,IAAMT,MAAM,GAAG,IAAIC,cAAJ,CAAmBiB,KAAnB,CAAf;IACAlB,MAAM,CAACE,KAAP,GAAeQ,IAAf,CAAoB;MAClBF,SAAS,CAACR,MAAM,CAACY,MAAP,EAAD,CAAT;KADF;IAGAM,KAAK,KAAK,EAAV,IAAgBE,YAAY,CAACC,OAAb,CAAqB,aAArB,EAAoCH,KAApC,CAAhB;GALO,EAMN,CAACA,KAAD,CANM,CAAT;EAQAT,SAAS,CAAC;IACR,IAAMa,UAAU,GAAGF,YAAY,CAACG,OAAb,CAAqB,aAArB,CAAnB;IACA,CAAC,CAACD,UAAF,IAAgBH,QAAQ,CAACG,UAAU,IAAI,EAAf,CAAxB;GAFO,EAGN,EAHM,CAAT;;EAKA,IAAME,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD;IAClB,IAAMC,MAAM,GAAGD,CAAC,CAACC,MAAjB;IAIAP,QAAQ,CAACO,MAAM,CAACC,KAAR,CAAR;GALF;;EAQA,OACEd,mBAAA,MAAA;IAAKC,SAAS,EAAC;GAAf,EACED,mBAAA,WAAA;IAAUC,SAAS,EAAC;IAAWc,QAAQ,EAAEJ;IAAaG,KAAK,EAAET;GAA7D,CADF,EAEEL,mBAAA,MAAA;IAAKC,SAAS,EAAC;IAAYC,uBAAuB,EAAE;MAAEC,MAAM,EAAET;;GAA9D,CAFF,CADF;AAMD;;;;"}